<aura:component controller="HDT_LC_ScriptTesterController" implements="force:appHostable">

    <aura:attribute name="recordId" type="String" default=""/>
    <aura:attribute name="scripts" type="List" default="[]"/>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <div class="slds-box slds-theme_default">
        <p class="slds-text-heading_medium">Indicare il record Id per cui avviare lo script: </p>
        <lightning:input value="{!v.recordId}" label="Record Id" />
    </div>

    <lightning:layout multipleRows="true">
        <aura:iteration items="{!v.scripts}" var="script">
            <lightning:layoutItem padding="around-small" size="3">
                <lightning:card title="{!script.Name}">

                    <p class="slds-p-horizontal_small">
                        <div>Context Object: {!script.ContextObject__c}</div>
                        <div>Created By: {!script.CreatedBy.Name}</div>

                        <div class="slds-p-around_small">
                            <c:hdtManageScriptModal scriptProcessName="{!script.Name}"
                                recordId="{!v.recordId}"
                                buttonLabel="Avvia Script">
                            </c:hdtManageScriptModal>
                            
                            <lightning:button label="Modifica Script" iconName="utility:edit" class="slds-m-left_small" value="{!script.Id}" onclick="{! c.openScript }"/>
                        </div>
                    </p>

                </lightning:card>
            </lightning:layoutItem>
        </aura:iteration>
    </lightning:layout>

</aura:component>	

<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>52.0</apiVersion>
    <assignments>
        <name>AddToCollection_0_0_0_0_0</name>
        <label>AddToCollection</label>
        <locationX>974</locationX>
        <locationY>1766</locationY>
        <assignmentItems>
            <assignToReference>IndemnityCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>FirstIndemnityCase</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CreateIndemnityRecords</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddToCollection_0_0_0_0_0_0</name>
        <label>AddToCollection</label>
        <locationX>1238</locationX>
        <locationY>1886</locationY>
        <assignmentItems>
            <assignToReference>IndemnityCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>FirstIndemnityCase</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IndemnityCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>SecondIndemnityCase</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CreateIndemnityRecords</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignCausalCode</name>
        <label>AssignCausalCode</label>
        <locationX>974</locationX>
        <locationY>1646</locationY>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.CausalCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetFirstCausalCode.CausalCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.OperationCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetFirstCausalCode.OperationCode__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddToCollection_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignCausalCode_0</name>
        <label>AssignCausalCode</label>
        <locationX>1238</locationX>
        <locationY>1766</locationY>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.CausalCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetFirstCausalCode.CausalCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.OperationCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetFirstCausalCode.OperationCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.CausalCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetSecondCausalCode.CausalCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.OperationCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetSecondCausalCode.OperationCode__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddToCollection_0_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignPhase</name>
        <label>AssignPhase</label>
        <locationX>1194</locationX>
        <locationY>2462</locationY>
        <assignmentItems>
            <assignToReference>UpdatePhase.Phase__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Da Inviare</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdatePhase.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Lavorazione</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssignToCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignToCollection</name>
        <label>AssignToCollection</label>
        <locationX>1194</locationX>
        <locationY>2582</locationY>
        <assignmentItems>
            <assignToReference>UpdateCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>UpdatePhase</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdatePhase</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables</name>
        <label>AssignVariables</label>
        <locationX>50</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invio</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueSendResponse__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>1106</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invio</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueSendResponse__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>1370</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Attesa</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueBilllingCorrection__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>1634</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Rettifica</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueBilllingCorrection__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>1898</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Rettifica</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueBilllingCorrection__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>314</locationX>
        <locationY>878</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invio</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueSendResponse__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AmountTypeSecond</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Attesa</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueBilllingCorrection__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>578</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invio</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueSendResponse__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariables_0_0_0_0_0_0_0_0_0</name>
        <label>AssignVariables</label>
        <locationX>842</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>AmountTypeFirst</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invio</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.IndemnityDueBilllingCorrection__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetFirstCausalCode</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariablesFirst</name>
        <label>AssignVariablesFirst</label>
        <locationX>1106</locationX>
        <locationY>398</locationY>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.ContactId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Cluster__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Indennizzi</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Origin</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Origin</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Contract__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Contract__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.ServicePoint__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.ServicePoint__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Phase__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Bozza</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Email__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.PhoneNumber__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.PhoneNumber__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIndemnityRecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SalesCompanyCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SalesCompanyCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.DistributorCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.DistributorCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.RateCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.RateCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.CompanyOwner__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.CompanyOwner__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.BillingProfile__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.BillingProfile__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyCityCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCityCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyPostalCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyPostalCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyCity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyStreetNumber__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyStreetNumber__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyProvince__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyProvince__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyStreetName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyStreetName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FirstIndemnityCase.SupplyCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCountry__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssignVariablesSecond</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignVariablesSecond</name>
        <label>AssignVariablesSecond</label>
        <locationX>1106</locationX>
        <locationY>518</locationY>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.ContactId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Cluster__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Indennizzi</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Origin</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Origin</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Contract__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Contract__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.ServicePoint__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.ServicePoint__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Phase__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Bozza</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIndemnityRecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SalesCompanyCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SalesCompanyCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.DistributorCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.DistributorCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.RateCategory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.RateCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.CompanyOwner__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.CompanyOwner__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.BillingProfile__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.BillingProfile__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyCityCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCityCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyPostalCode__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyPostalCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyCity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyStreetNumber__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyStreetNumber__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyProvince__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyProvince__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyStreetName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyStreetName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SecondIndemnityCase.SupplyCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getInputCase.SupplyCountry__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Switch_Casistica</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Doppio_Indennizzo</name>
        <label>Doppio Indennizzo?</label>
        <locationX>512</locationX>
        <locationY>758</locationY>
        <defaultConnector>
            <targetReference>Quale_importo_prendere</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Singolo</defaultConnectorLabel>
        <rules>
            <name>Doppio</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueSendResponse__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0_0_0_0_0</targetReference>
            </connector>
            <label>Doppio</label>
        </rules>
    </decisions>
    <decisions>
        <name>HowManyCase</name>
        <label>HowManyCase?</label>
        <locationX>1106</locationX>
        <locationY>1526</locationY>
        <defaultConnector>
            <targetReference>GetSecondCausalCode</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Two</defaultConnectorLabel>
        <rules>
            <name>One</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>AmountTypeSecond</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue/>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AmountTypeSecond</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignCausalCode</targetReference>
            </connector>
            <label>One</label>
        </rules>
    </decisions>
    <decisions>
        <name>Quale_importo_prendere</name>
        <label>Quale importo prendere?</label>
        <locationX>710</locationX>
        <locationY>878</locationY>
        <defaultConnector>
            <targetReference>AssignVariables_0_0_0_0_0_0_0_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Rettifica Fatturazione</defaultConnectorLabel>
        <rules>
            <name>Invio_risposta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueSendResponse__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0_0_0_0_0_0</targetReference>
            </connector>
            <label>Invio risposta</label>
        </rules>
    </decisions>
    <decisions>
        <name>Switch_Casistica</name>
        <label>Switch Casistica</label>
        <locationX>1106</locationX>
        <locationY>638</locationY>
        <defaultConnectorLabel>No Indennizzo</defaultConnectorLabel>
        <rules>
            <name>X1_Invio_Ind_Confermato</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamo Scritto</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityConfirmed__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueSendResponse__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables</targetReference>
            </connector>
            <label>1 - Inviata Ind. Confermato</label>
        </rules>
        <rules>
            <name>X2_Ind_Conf_Diritto_Rett</name>
            <conditionLogic>1 AND 2 AND 3 AND 4 AND (5 OR 6)</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamo Scritto</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityConfirmed__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueSendResponse__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Doppio_Indennizzo</targetReference>
            </connector>
            <label>2 - Inviata Ind. Conf Diritto Rett.</label>
        </rules>
        <rules>
            <name>X3_Attesa_Rettifica</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamo Scritto</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata - Attesa Rettifica</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityConfirmed__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionDocumentEmissionDay__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueSendResponse__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0</targetReference>
            </connector>
            <label>3 - Attesa Rettifica assente</label>
        </rules>
        <rules>
            <name>X4_Attesa_Rettifica_Scaduta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamo Scritto</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityConfirmed__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata - Attesa Rettifica</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0_0</targetReference>
            </connector>
            <label>4 - Attesa Rettifica Scaduta</label>
        </rules>
        <rules>
            <name>X5_Doppia_Rettifica</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rettifica Doppia Fatturazione</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0_0_0</targetReference>
            </connector>
            <label>5 - Doppia Rettifica Inviata</label>
        </rules>
        <rules>
            <name>X6_Doppia_Rettifica_Attesa</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getInputCase.FirstLevelComplaintClassification__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rettifica Doppia Fatturazione</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.CorrectionRight__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Si</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.Phase__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risposta Inviata - Attesa Rettifica</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>getInputCase.IndemnityDueBilllingCorrection__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignVariables_0_0_0_0_0_0</targetReference>
            </connector>
            <label>6 - Doppia Rettifica Attesa</label>
        </rules>
    </decisions>
    <description>Flow per la gestione degli indennizzi</description>
    <interviewLabel>Gestione Indennizzi {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Gestione Indennizzi</label>
    <loops>
        <name>UpdatePhase</name>
        <label>UpdatePhase</label>
        <locationX>1106</locationX>
        <locationY>2342</locationY>
        <collectionReference>getCreatedIndemnities</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AssignPhase</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>UpdatePhaseCollection</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateIndemnityRecords</name>
        <label>CreateIndemnityRecords</label>
        <locationX>1106</locationX>
        <locationY>2102</locationY>
        <connector>
            <targetReference>getCreatedIndemnities</targetReference>
        </connector>
        <inputReference>IndemnityCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>getCreatedIndemnities</name>
        <label>getCreatedIndemnities</label>
        <locationX>1106</locationX>
        <locationY>2222</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>UpdatePhase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getIndemnityRecordType.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>ParentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getInputCase.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Phase__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Bozza</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetFirstCausalCode</name>
        <label>GetFirstCausalCode</label>
        <locationX>1106</locationX>
        <locationY>1406</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>HowManyCase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Cluster__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getInputCase.Cluster__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Process__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Indennizzo</stringValue>
            </value>
        </filters>
        <filters>
            <field>Commodity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getInputCase.CommodityFormula__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Subprocess__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AmountTypeFirst</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>HDT_CausalCodeCalculation__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getIndemnityRecordType</name>
        <label>getIndemnityRecordType</label>
        <locationX>1106</locationX>
        <locationY>278</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignVariablesFirst</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>HDT_RT_Indennizzo</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getInputCase</name>
        <label>getInputCase</label>
        <locationX>1106</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>getIndemnityRecordType</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>InputCase</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSecondCausalCode</name>
        <label>GetSecondCausalCode</label>
        <locationX>1238</locationX>
        <locationY>1646</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignCausalCode_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Cluster__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getInputCase.Cluster__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Process__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Indennizzo</stringValue>
            </value>
        </filters>
        <filters>
            <field>Commodity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getInputCase.CommodityFormula__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Subprocess__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AmountTypeSecond</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>HDT_CausalCodeCalculation__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>UpdatePhaseCollection</name>
        <label>UpdatePhaseCollection</label>
        <locationX>1106</locationX>
        <locationY>2798</locationY>
        <inputReference>UpdateCollection</inputReference>
    </recordUpdates>
    <start>
        <locationX>980</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>getInputCase</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <description>Values:
1. Invio
2. Attesa
3. Rettifica</description>
        <name>AmountTypeFirst</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Values: 1. Invio 2. Attesa 3. Rettifica</description>
        <name>AmountTypeSecond</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FirstIndemnityCase</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>IndemnityCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <description>Input parent Case for Indemnity calculation</description>
        <name>InputCase</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SecondIndemnityCase</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>UpdateCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
</Flow>

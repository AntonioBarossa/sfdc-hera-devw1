<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>53.0</apiVersion>
    <choices>
        <name>Choice_No</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>Choice_no2</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>Choice_Si</name>
        <choiceText>Si</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Si</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice1</name>
        <choiceText>PREVENTIVI (SOPRALLUOGHI/TEMPI)</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PREVENTIVI (SOPRALLUOGHI/TEMPI)</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice2</name>
        <choiceText>ESTRATO CONTO/CREDITO/RATEIZZAZIONI</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ESTRATO CONTO/CREDITO/RATEIZZAZIONI</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice3</name>
        <choiceText>CONTRATTI (MODULISTICA/TEMPI)</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>CONTRATTI (MODULISTICA/TEMPI)</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice4</name>
        <choiceText>INVIO - RICEVIMENTO DOCUMENTAZIONE VARIE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INVIO - RICEVIMENTO DOCUMENTAZIONE VARIE</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice5</name>
        <choiceText>ML/AGENZIE/TLS</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ML/AGENZIE/TLS</stringValue>
        </value>
    </choices>
    <choices>
        <name>RB2Choice6</name>
        <choiceText>PROBLEMI TECNICI/CONTATORI/AUTOLETTURE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PROBLEMI TECNICI/CONTATORI/AUTOLETTURE</stringValue>
        </value>
    </choices>
    <decisions>
        <name>isResponseExistDecision</name>
        <label>isResponseExistDecision</label>
        <locationX>182</locationX>
        <locationY>638</locationY>
        <defaultConnector>
            <targetReference>CreateSurveyResponse_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>isNotResponseExist</defaultConnectorLabel>
        <rules>
            <name>isResponseExist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSurveyResponse</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateSurveyResponse</targetReference>
            </connector>
            <label>isResponseExist</label>
        </rules>
    </decisions>
    <interviewLabel>HDT FL Script - Churn Prevention {!$Flow.CurrentDateTime}</interviewLabel>
    <label>HDT FL Script - Churn Prevention</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateSurveyResponse_0</name>
        <label>CreateSurveyResponse</label>
        <locationX>314</locationX>
        <locationY>758</locationY>
        <inputAssignments>
            <field>Response1__c</field>
            <value>
                <elementReference>RB1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response2__c</field>
            <value>
                <elementReference>RB2_NonSoddisfatto</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response3__c</field>
            <value>
                <elementReference>RB3</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response4__c</field>
            <value>
                <elementReference>RB4</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SurveyCRM__c</field>
            <value>
                <elementReference>GetSurvey.Id</elementReference>
            </value>
        </inputAssignments>
        <object>SurveyResponse__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>GetCampaignMember</name>
        <label>GetCampaignMember</label>
        <locationX>182</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Screen1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>idCampaignMemberInput</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CampaignMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSurvey</name>
        <label>GetSurvey</label>
        <locationX>182</locationX>
        <locationY>398</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetSurveyResponse</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Survey Churn Prevention</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SurveyCRM__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSurveyResponse</name>
        <label>GetSurveyResponse</label>
        <locationX>182</locationX>
        <locationY>518</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>isResponseExistDecision</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Contact__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetCampaignMember.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Campaign__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetCampaignMember.Campaign.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>SurveyCRM__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetSurvey.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SurveyResponse__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>UpdateSurveyResponse</name>
        <label>UpdateSurveyResponse</label>
        <locationX>50</locationX>
        <locationY>758</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetSurveyResponse.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Response1__c</field>
            <value>
                <elementReference>RB1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response2__c</field>
            <value>
                <elementReference>RB2_NonSoddisfatto</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response3__c</field>
            <value>
                <elementReference>RB3</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Response4__c</field>
            <value>
                <elementReference>RB4</elementReference>
            </value>
        </inputAssignments>
        <object>SurveyResponse__c</object>
    </recordUpdates>
    <screens>
        <name>Screen1</name>
        <label>Screen1</label>
        <locationX>182</locationX>
        <locationY>278</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>GetSurvey</targetReference>
        </connector>
        <fields>
            <name>text1</name>
            <fieldText>&lt;p&gt;&lt;b&gt;OPERATORE&lt;/b&gt;:&lt;/p&gt;&lt;p&gt;«Gentile Sig.&amp;nbsp;&amp;nbsp;Nome e Cognome&amp;nbsp;la chiamiamo per conto del Servizio Clienti di Hera. Nei giorni scorsi le abbiamo mandato una mail/sms con alcune brevi domande per comprendere e soddisfare al meglio le sue esigenze e quelle di tutti i nostri clienti. Le è capitato di vederlo? Volevamo capire se è soddisfatto del servizio di Hera e parlare insieme della sua situazione.&amp;nbsp;&amp;nbsp;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>RB1</name>
            <choiceReferences>Choice_Si</choiceReferences>
            <choiceReferences>Choice_No</choiceReferences>
            <dataType>String</dataType>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>RB2_NonSoddisfatto</name>
            <choiceReferences>RB2Choice1</choiceReferences>
            <choiceReferences>RB2Choice2</choiceReferences>
            <choiceReferences>RB2Choice3</choiceReferences>
            <choiceReferences>RB2Choice4</choiceReferences>
            <choiceReferences>RB2Choice5</choiceReferences>
            <choiceReferences>RB2Choice6</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Motivo insoddisfazione</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>RB1</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>No</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>text2</name>
            <fieldText>&lt;p&gt;&lt;b&gt;OPERATORE&lt;/b&gt;:&lt;/p&gt;&lt;p&gt;La ringrazio per il suo suggerimento che riteniamo utile per le prossime azioni di sviluppo e miglioramento. Hera vuole fare anche qualcosa di tangibile per cercare di soddisfare sempre i propri clienti, per questo le offro un bonus con il quale le regaliamo 30 euro di sconto per punto di fornitura che le verranno riconosciuti nelle prossime bollette.&lt;/p&gt;&lt;p&gt;Solo per i clienti che hanno l&apos;offerta Hera Impronta Zero, la nostra offerta di punta che può sottoscrivere anche in questo momento, la nostra direzione le applicherà un ulteriore sconto di euro 30 complessivi per ogni servizio, riconosciuto in fattura in tre quote di eguale importo ed erogate al 6°, 12° e 18° mese a partire da oggi.&lt;/p&gt;&lt;p&gt;Se il cliente accetta far partire nuova vendita&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>RB1</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>No</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>text3</name>
            <fieldText>&lt;p&gt;OPERATORE:&lt;/p&gt;&lt;p&gt;La ringraziamo per la sua fiducia e le ricordo inoltre che per qualsiasi altra necessità può attivare i Servizi Online o scaricare la nuova App MyHera che permettono di gestire, con comodità, 24 ore su 24, servizi e forniture.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;CAMPAGNA OUTBOUND RID&lt;/p&gt;&lt;p&gt;Verificando i suoi dati, ho visto che non ha ancora attivato la domiciliazione bancaria.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Con il pagamento tramite domiciliazione bancaria si mette al riparo da mancati pagamenti anche involontari che comportano l’addebito di interessi di mora ed evita file in posta per effettuare il pagamento e può gestire con facilità le sue forniture. Mi da il suo codice IBAN?&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;(Se il cliente accetta far partire nuovo case Richiesta domiciliazione)&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>RB3</name>
            <choiceReferences>Choice_Si</choiceReferences>
            <choiceReferences>Choice_No</choiceReferences>
            <dataType>String</dataType>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>text4</name>
            <fieldText>&lt;p&gt;CAMPAGNA OUTBOUND IEB&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Verificando i suoi dati, ho visto che non ha ancora attivato l’invio elettronico della bolletta.&amp;nbsp;&lt;/p&gt;&lt;p&gt;Con&amp;nbsp;l’invio elettronico della bolletta, non subirà eventuali ritardi o mancate consegne della posta, aiuterà l’ambiente evitando l’uso della carta e potrà comodamente archiviare tutte le bollette sul suo pc. Mi lascia l’indirizzo e-mail al quale inviarle le bollette?&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;(Se il cliente accetta far partire nuovo case Attivazione Invio Elettronico Bolletta)&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>RB4</name>
            <choiceReferences>Choice_Si</choiceReferences>
            <choiceReferences>Choice_No</choiceReferences>
            <dataType>String</dataType>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>GetCampaignMember</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>Collection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>idCampaignMemberInput</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>

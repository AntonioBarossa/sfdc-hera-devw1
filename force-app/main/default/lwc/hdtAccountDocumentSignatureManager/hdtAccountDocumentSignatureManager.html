<template>
    <template if:true={dataLoaded}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                        <template if:true={showSpinner}>
                            <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
                        </template>
                        <lightning-card title="Gestione Documentale" icon-name="custom:custom12" size="small"> 
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-combobox name="modalitaInvio" label="Modalità di invio documentazione" value={sendMode}
                                        placeholder="Seleziona una Modalità" options={modalitaInvio} onchange={handleChange}
                                        data-id="modalitaSpedizione" required></lightning-combobox>
                                </div>
                                <div class="slds-col slds-size_1-of-8 slds-grow-none">
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input type="email" data-id="email" required={emailRequired} label="Email invio documentazione" value={email} disabled={enableEdit} pattern = "[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" message-when-pattern-mismatch="Inserire un indirizzo e-mail valido."></lightning-input>
                                </div>
                            </div>
                        </lightning-card>
                    </div>
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Annulla</button>
                        <button class="slds-button slds-button_brand" onclick={handlePreview} title="OK">Preview</button>
                        <template if:true={showSendButton}>
                            <button class="slds-button slds-button_brand" onclick={checkForm} title="OK">Invia e Archivia</button>
                        </template>
                    </footer>
                </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>
<template>
    <p class="slds-text-heading_medium">Agenzia di Vendita</p>
    <template if:true={agentSet}>
        <div class="slds-box slds-theme_shade slds-grid slds-grid_vertical-align-start">
            <p class="slds-text-heading_small">Selezionato:</p>
            <p>Agente: {selectedAgent.AgentFirstName__c} {selectedAgent.AgentLastName__c}, Codice: {selectedAgent.AgentCode__c}</p>
            <p>Agenzia: {selectedAgent.AgencyName__c}, Codice: {selectedAgent.AgencyCode__c}</p>
        </div>
    </template>
    
    <lightning-input type="text" placeholder="Cerca per Cognome, Codice Agenzia, Nome Agenzia" onkeydown={search}></lightning-input>
    <template if:true={agentsFound}>
        <template for:each={agents} for:item="agent">
            <div key={agent.AgentCode__c} class="slds-box slds-grid slds-grid_vertical-align-start" onclick={setAgent}>
                <p>Agente: {agent.AgentFirstName__c} {agent.AgentLastName__c}, Codice: {agent.AgentCode__c}</p>
                <p>Agenzia: {agent.AgencyName__c}, Codice: {agent.AgencyCode__c}</p>
            </div>
        </template>
    </template>
    <lightning-button variant="destructive" label="Cancella" onclick={clearAgency} disabled={agentNotSet} class="slds-grid_align-end"></lightning-button>
</template>
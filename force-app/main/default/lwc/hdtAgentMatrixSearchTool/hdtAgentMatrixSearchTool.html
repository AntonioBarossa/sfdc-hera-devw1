<!--// INIZIALMENTE QUESTO CMP DOVEVA USARE IL CODICE AGENTE. E' STATO ROZZAMENTE CONVERTITO PER USARE IL CODICE AGENZIA-->
<template>
    <div class="slds-box slds-theme_default slds-clearfix">
        <p class="slds-text-heading_medium slds-var-m-bottom_small">Agenzia di Vendita</p>
        <template if:true={showAgents}>
            <template for:each={selectedAgents} for:item="singleAgent">
                <div class="slds-m-top_small" key={singleAgent.value}>
                    <lightning-card  title={singleAgent.name} key={singleAgent.value}>
                        <lightning-button-icon key={singleAgent.value} data-id={singleAgent.value} onclick={handleClick} icon-name="utility:delete"  slot="actions"  alternative-text="Delete"   class="slds-m-left_xx-small" title="Delete"></lightning-button-icon>                    
                    </lightning-card>
                </div>
            </template>
            <!--<div class="slds-box slds-theme_shade slds-var-m-bottom_small">
                
                <p>Agenzia: {selectedAgent.AgencyName__c}, Codice: {selectedAgent.AgencyCode__c}</p>
                <lightning-button-icon icon-name="utility:delete"    alternative-text="Delete"   class="slds-m-left_xx-small" title="Delete"></lightning-button-icon>
            </div>-->
        </template>
        
        <lightning-input type="text" placeholder="Cerca Agenzia per Nome o per Cognome di un suo Agente o per Codice Agenzia e premi Invio" variant="label-hidden" onkeydown={search} class="searchBar slds-m-top_small"></lightning-input>
        <template if:true={agentsFound}>
            <div class="slds-scrollable_y maxHeight">
                <template for:each={agents} for:item="agent">
                    <div key={agent.AgentCode__c} data-agentcode={agent.AgencyCode__c} class="slds-box slds-var-m-top_x-small" onclick={setAgent}>
                        <p>Agenzia: {agent.AgencyName__c}, Codice: {agent.AgencyCode__c}</p>
                    </div>
                </template>
            </div>
        </template>
        <!--<lightning-button variant="destructive" label="Cancella" onclick={clearAgency} disabled={agentNotSet} class="slds-float_right slds-var-m-top_small"></lightning-button>-->
    </div>
</template>
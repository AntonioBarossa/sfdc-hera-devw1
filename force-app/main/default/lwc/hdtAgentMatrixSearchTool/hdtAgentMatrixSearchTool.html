<template>
    <div class="slds-box slds-theme_default slds-clearfix">
        <p class="slds-text-heading_medium slds-var-m-bottom_small">Agenzia di Vendita</p>
        <template if:true={agentSet}>
            <div class="slds-box slds-theme_shade slds-var-m-bottom_small">
                <p class="slds-text-heading_small">Selezionato:</p>
                <p>Agente: {selectedAgent.AgentFirstName__c} {selectedAgent.AgentLastName__c}, Codice: {selectedAgent.AgentCode__c}</p>
                <p>Agenzia: {selectedAgent.AgencyName__c}, Codice: {selectedAgent.AgencyCode__c}</p>
            </div>
        </template>
        
        <lightning-input type="text" placeholder="Cerca per Cognome o Nome Agenzia" variant="label-hidden" onkeydown={search} class="searchBar"></lightning-input>
        <template if:true={agentsFound}>
            <div class="slds-scrollable_y maxHeight">
                <template for:each={agents} for:item="agent">
                    <div key={agent.AgentCode__c} data-agentcode={agent.AgentCode__c} class="slds-box slds-var-m-top_x-small" onclick={setAgent}>
                        <p>Agente: {agent.AgentFirstName__c} {agent.AgentLastName__c}, Codice: {agent.AgentCode__c}</p>
                        <p>Agenzia: {agent.AgencyName__c}, Codice: {agent.AgencyCode__c}</p>
                    </div>
                </template>
            </div>
        </template>
        <lightning-button variant="destructive" label="Cancella" onclick={clearAgency} disabled={agentNotSet} class="slds-float_right slds-var-m-top_small"></lightning-button>
    </div>
</template>
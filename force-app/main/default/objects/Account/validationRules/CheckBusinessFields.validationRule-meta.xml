<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>CheckBusinessFields</fullName>
    <active>true</active>
    <errorConditionFormula>IF(AND(IsMigrated__c = True,RecordType.DeveloperName = &quot;HDT_RT_Business&quot;,ISPICKVAL(CustomerAccountStatus__c, &quot;Prospect&quot;)) , false,
		
			IF(AND(RecordType.DeveloperName = &quot;HDT_RT_Business&quot;, OR( Not(BillingIsAddressVerified__c), ISPICKVAL(CustomerMarking__c, &quot;&quot;),ISPICKVAL(Category__c, &quot;&quot;), ISPICKVAL(CompanyOwner__c, &quot;&quot;))),true ,

				IF(AND( 
						OR( CONTAINS(TEXT(CustomerMarking__c), &apos;Condominio&apos;) , CONTAINS(TEXT(CustomerMarking__c), &apos;Associazione&apos;)),ISBLANK(FiscalCode__c)
					),true,
					ISBLANK(VATNumber__c)
				)

			)
		)</errorConditionFormula>
    <errorMessage>Campi obbligatori: Marcatura , Categoria ,Indirizzo ,Silos.
		La PIVA è obbligatoria solo se Marcatura è DIVERSA da Condominio o Associazione.
		Il CF è obbligatorio solo se Marcatura è UGUALE a Condominio o Associazione.</errorMessage>
</ValidationRule>
